# 新闻抓取与分析服务配置文件

# 应用基础配置
app:
  name: "新闻分析服务"
  timezone: "Asia/Shanghai"
  log_level: "INFO"

# 数据库配置
database:
  type: "sqlite"  # sqlite 或 postgresql
  path: "data/news.db"  # SQLite 数据库路径
  # PostgreSQL 配置（如果使用）
  # host: "localhost"
  # port: 5432
  # user: "your_user"
  # password: "your_password"
  # dbname: "news_db"


# ===============================================================
# 数据源 - 热榜平台（国内新闻源）
#
# 热榜平台数据归类为国内新闻源（source_type: domestic）
# enabled: 是否启用热榜抓取（总开关）
# sources: 平台列表
#   - id: 平台唯一标识（勿修改）
#   - name: 显示名称（可自定义，修改后不影响运行）
# ===============================================================
platforms:
  enabled: true                         # 是否启用热榜平台抓取
  sources:
    - id: "toutiao"
      name: "今日头条"
    - id: "baidu"
      name: "百度热搜"
    - id: "wallstreetcn-hot"
      name: "华尔街见闻"
    - id: "thepaper"
      name: "澎湃新闻"
    - id: "bilibili-hot-search"
      name: "bilibili 热搜"
    - id: "cls-hot"
      name: "财联社热门"
    - id: "ifeng"
      name: "凤凰网"
    - id: "tieba"
      name: "贴吧"
    - id: "weibo"
      name: "微博"
    - id: "douyin"
      name: "抖音"
    - id: "zhihu"
      name: "知乎"

# 新闻源配置
news_sources:
  # 国内新闻源
  domestic:
    # 新浪新闻 - 暂时禁用，原 URL 不是有效的 RSS feed
    # 如需使用，请查找新浪新闻的官方 RSS feed URL
    - name: "新浪新闻"
      type: "rss"
      url: "https://news.sina.com.cn/roll/index.d.html"
      enabled: false
    
    - name: "新华网"
      type: "rss"
      url: "http://www.xinhuanet.com/politics/news_politics.xml"
      enabled: true
    
    - name: "人民网"
      type: "rss"
      url: "http://www.people.com.cn/rss/politics.xml"
      enabled: true
    
    # 澎湃新闻 - 使用第三方 RSS 聚合源
    # 原 URL (https://www.thepaper.cn/feed_web_channel_26932) 返回 HTML 而非 RSS feed
    # 如果此 URL 不可用，可以尝试查找澎湃新闻的官方 RSS feed 或暂时禁用
    - name: "澎湃新闻"
      type: "rss"
      url: "https://feedx.net/rss/thepaper.xml"
      enabled: true

  # 国际新闻源
  international:
    - name: "BBC News"
      type: "rss"
      url: "http://feeds.bbci.co.uk/news/rss.xml"
      enabled: true
    
    # Reuters - 尝试使用 feeds.reuters.com 的 RSS feed
    # 主站点 (reuters.com) 可能要求认证，使用 feeds 子域名
    # 如果此 URL 不可用，可以暂时禁用或查找其他可用的 Reuters RSS feed
    - name: "Reuters"
      type: "rss"
      url: "http://feeds.reuters.com/reuters/worldNews"
      enabled: false
    
    - name: "CNN"
      type: "rss"
      url: "http://rss.cnn.com/rss/edition.rss"
      enabled: true
    
    - name: "The Guardian"
      type: "rss"
      url: "https://www.theguardian.com/world/rss"
      enabled: true

# 抓取配置
crawler:
  request_interval: 2  # 请求间隔（秒）
  timeout: 30  # 请求超时（秒）
  max_articles_per_source: 50  # 每个源最多抓取文章数
  user_agent: "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"

# AI 分析配置
ai:
  provider: "openai"  # openai, anthropic, deepseek
  api_key: ""  # 从环境变量 AI_API_KEY 读取
  model: "gpt-4o-mini"  # 模型名称
  base_url: ""  # 自定义 API 地址（可选）
  temperature: 0.7
  max_tokens: 2000
  timeout: 60

# 分析配置
analysis:
  enabled: true
  language: "中文"
  max_articles_per_analysis: 20  # 每次分析的文章数量
  analysis_interval: 3600  # 分析间隔（秒），1小时

# 服务配置
service:
  fetch_interval: 1800  # 抓取间隔（秒），30分钟
  enable_scheduler: true  # 是否启用定时任务

# Web 服务配置
web:
  enabled: true  # 是否启用 Web 服务
  host: "0.0.0.0"  # 监听地址
  port: 8000  # 监听端口
